import os
import zipfile

# Criar estrutura de pastas
os.makedirs('controle-caminhoneiros/public', exist_ok=True)
os.makedirs('controle-caminhoneiros/src', exist_ok=True)

# Criar public/index.html
public_index_html = """<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Sistema de Controle de Acesso para Caminhoneiros" />
    <title>Controle de Caminhoneiros</title>
  </head>
  <body>
    <noscript>VocÃª precisa habilitar JavaScript para executar este aplicativo.</noscript>
    <div id="root"></div>
  </body>
</html>"""

with open('controle-caminhoneiros/public/index.html', 'w', encoding='utf-8') as f:
    f.write(public_index_html)

# Criar src/index.js
src_index_js = """import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);"""

with open('controle-caminhoneiros/src/index.js', 'w', encoding='utf-8') as f:
    f.write(src_index_js)

# Criar src/index.css
src_index_css = """* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}"""

with open('controle-caminhoneiros/src/index.css', 'w', encoding='utf-8') as f:
    f.write(src_index_css)

# Criar src/App.js
src_app_js = """import React, { useState } from 'react';
import './App.css';

function App() {
  const [registros, setRegistros] = useState([]);
  const [formulario, setFormulario] = useState({
    tipo: 'entrada',
    transportadora: '',
    placa: '',
    motorista: '',
    cpf: '',
    temAjudante: false,
    ajudante: '',
    cpfAjudante: '',
    operacao: '',
    cliente: '',
    assinatura: ''
  });

  const handleChange = (e) => {
    const { name, value, type, checked } = e.target;
    setFormulario({
      ...formulario,
      [name]: type === 'checkbox' ? checked : value
    });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    const novoRegistro = {
      ...formulario,
      dataHora: new Date().toLocaleString('pt-BR'),
      id: Date.now()
    };
    setRegistros([novoRegistro, ...registros]);
    
    // Limpar formulÃ¡rio
    setFormulario({
      tipo: 'entrada',
      transportadora: '',
      placa: '',
      motorista: '',
      cpf: '',
      temAjudante: false,
      ajudante: '',
      cpfAjudante: '',
      operacao: '',
      cliente: '',
      assinatura: ''
    });
    
    alert('Registro salvo com sucesso!');
  };

  const exportarCSV = () => {
    if (registros.length === 0) {
      alert('NÃ£o hÃ¡ registros para exportar');
      return;
    }

    const headers = ['Data/Hora', 'Tipo', 'Transportadora', 'Placa', 'Motorista', 'CPF', 'Ajudante', 'CPF Ajudante', 'OperaÃ§Ã£o', 'Cliente'];
    const csvContent = [
      headers.join(','),
      ...registros.map(r => [
        r.dataHora,
        r.tipo,
        r.transportadora,
        r.placa,
        r.motorista,
        r.cpf,
        r.ajudante || '-',
        r.cpfAjudante || '-',
        r.operacao,
        r.cliente
      ].join(','))
    ].join('\\n');

    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = \`registros_\${new Date().toISOString().split('T')[0]}.csv\`;
    link.click();
  };

  return (
    <div className="App">
      <header className="App-header">
        <h1>ğŸš› Controle de Acesso - Caminhoneiros</h1>
      </header>

      <main className="container">
        <div className="form-card">
          <h2>Novo Registro</h2>
          <form onSubmit={handleSubmit}>
            <div className="form-group">
              <label>Tipo de Registro:</label>
              <select name="tipo" value={formulario.tipo} onChange={handleChange} required>
                <option value="entrada">Entrada</option>
                <option value="saida">SaÃ­da</option>
              </select>
            </div>

            <div className="form-group">
              <label>Transportadora:</label>
              <input
                type="text"
                name="transportadora"
                value={formulario.transportadora}
                onChange={handleChange}
                placeholder="Nome da transportadora"
                required
              />
            </div>

            <div className="form-group">
              <label>Placa do CaminhÃ£o:</label>
              <input
                type="text"
                name="placa"
                value={formulario.placa}
                onChange={handleChange}
                placeholder="ABC-1234"
                required
              />
            </div>

            <div className="form-group">
              <label>Nome do Motorista:</label>
              <input
                type="text"
                name="motorista"
                value={formulario.motorista}
                onChange={handleChange}
                placeholder="Nome completo"
                required
              />
            </div>

            <div className="form-group">
              <label>CPF do Motorista:</label>
              <input
                type="text"
                name="cpf"
                value={formulario.cpf}
                onChange={handleChange}
                placeholder="000.000.000-00"
                required
              />
            </div>

            <div className="form-group checkbox-group">
              <label>
                <input
                  type="checkbox"
                  name="temAjudante"
                  checked={formulario.temAjudante}
                  onChange={handleChange}
                />
                Possui Ajudante?
              </label>
            </div>

            {formulario.temAjudante && (
              <>
                <div className="form-group">
                  <label>Nome do Ajudante:</label>
                  <input
                    type="text"
                    name="ajudante"
                    value={formulario.ajudante}
                    onChange={handleChange}
                    placeholder="Nome completo"
                  />
                </div>

                <div className="form-group">
                  <label>CPF do Ajudante:</label>
                  <input
                    type="text"
                    name="cpfAjudante"
                    value={formulario.cpfAjudante}
                    onChange={handleChange}
                    placeholder="000.000.000-00"
                  />
                </div>
              </>
            )}

            <div className="form-group">
              <label>Tipo de OperaÃ§Ã£o:</label>
              <select name="operacao" value={formulario.operacao} onChange={handleChange} required>
                <option value="">Selecione...</option>
                <option value="carga">Carga</option>
                <option value="descarga">Descarga</option>
                <option value="manutencao">ManutenÃ§Ã£o</option>
                <option value="outros">Outros</option>
              </select>
            </div>

            <div className="form-group">
              <label>Cliente/Destino:</label>
              <input
                type="text"
                name="cliente"
                value={formulario.cliente}
                onChange={handleChange}
                placeholder="Nome do cliente ou destino"
                required
              />
            </div>

            <div className="form-group">
              <label>Assinatura Digital:</label>
              <input
                type="text"
                name="assinatura"
                value={formulario.assinatura}
                onChange={handleChange}
                placeholder="Digite seu nome como assinatura"
                required
              />
            </div>

            <button type="submit" className="btn-submit">
              Registrar {formulario.tipo === 'entrada' ? 'Entrada' : 'SaÃ­da'}
            </button>
          </form>
        </div>

        <div className="registros-section">
          <div className="registros-header">
            <h2>Registros ({registros.length})</h2>
            {registros.length > 0 && (
              <button onClick={exportarCSV} className="btn-export">
                ğŸ“¥ Exportar CSV
              </button>
            )}
          </div>

          {registros.length === 0 ? (
            <p className="empty-message">Nenhum registro ainda. FaÃ§a o primeiro cadastro!</p>
          ) : (
            <div className="registros-list">
              {registros.map((registro) => (
                <div key={registro.id} className={\`registro-card \${registro.tipo}\`}>
                  <div className="registro-header">
                    <span className="registro-tipo">
                      {registro.tipo === 'entrada' ? 'ğŸŸ¢ ENTRADA' : 'ğŸ”´ SAÃDA'}
                    </span>
                    <span className="registro-data">{registro.dataHora}</span>
                  </div>
                  <div className="registro-body">
                    <p><strong>Transportadora:</strong> {registro.transportadora}</p>
                    <p><strong>Placa:</strong> {registro.placa}</p>
                    <p><strong>Motorista:</strong> {registro.motorista} (CPF: {registro.cpf})</p>
                    {registro.ajudante && (
                      <p><strong>Ajudante:</strong> {registro.ajudante} (CPF: {registro.cpfAjudante})</p>
                    )}
                    <p><strong>OperaÃ§Ã£o:</strong> {registro.operacao}</p>
                    <p><strong>Cliente:</strong> {registro.cliente}</p>
                    <p><strong>Assinatura:</strong> {registro.assinatura}</p>
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>
      </main>
    </div>
  );
}

export default App;"""

with open('controle-caminhoneiros/src/App.js', 'w', encoding='utf-8') as f:
    f.write(src_app_js)

# Criar src/App.css
src_app_css = """.App {
  min-height: 100vh;
  padding-bottom: 2rem;
}

.App-header {
  background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
  padding: 2rem;
  text-align: center;
  color: white;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.App-header h1 {
  font-size: 2rem;
  margin: 0;
}

.container {
  max-width: 1200px;
  margin: 2rem auto;
  padding: 0 1rem;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
}

@media (max-width: 968px) {
  .container {
    grid-template-columns: 1fr;
  }
}

.form-card {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.form-card h2 {
  color: #1e3c72;
  margin-bottom: 1.5rem;
  font-size: 1.5rem;
}

.form-group {
  margin-bottom: 1.5rem;
}

.form-group label {
  display: block;
  margin-bottom: 0.5rem;
  color: #333;
  font-weight: 600;
}

.form-group input,
.form-group select {
  width: 100%;
  padding: 0.75rem;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  font-size: 1rem;
  transition: border-color 0.3s;
}

.form-group input:focus,
.form-group select:focus {
  outline: none;
  border-color: #667eea;
}

.checkbox-group label {
  display: flex;
  align-items: center;
  cursor: pointer;
}

.checkbox-group input[type="checkbox"] {
  width: auto;
  margin-right: 0.5rem;
  cursor: pointer;
}

.btn-submit {
  width: 100%;
  padding: 1rem;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}

.btn-submit:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(102, 126, 234, 0.4);
}

.btn-submit:active {
  transform: translateY(0);
}

.registros-section {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  max-height: 800px;
  overflow-y: auto;
}

.registros-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
}

.registros-header h2 {
  color: #1e3c72;
  font-size: 1.5rem;
  margin: 0;
}

.btn-export {
  padding: 0.5rem 1rem;
  background: #10b981;
  color: white;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.3s;
}

.btn-export:hover {
  background: #059669;
}

.empty-message {
  text-align: center;
  color: #999;
  padding: 2rem;
  font-style: italic;
}

.registros-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.registro-card {
  border-radius: 8px;
  padding: 1rem;
  border-left: 4px solid;
  background: #f9fafb;
}

.registro-card.entrada {
  border-left-color: #10b981;
}

.registro-card.saida {
  border-left-color: #ef4444;
}

.registro-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.75rem;
  padding-bottom: 0.75rem;
  border-bottom: 1px solid #e5e7eb;
}

.registro-tipo {
  font-weight: 700;
  font-size: 0.9rem;
}

.registro-data {
  color: #6b7280;
  font-size: 0.85rem;
}

.registro-body p {
  margin: 0.5rem 0;
  color: #374151;
  font-size: 0.95rem;
}

.registro-body strong {
  color: #1f2937;
}"""

with open('controle-caminhoneiros/src/App.css', 'w', encoding='utf-8') as f:
    f.write(src_app_css)

# Criar package.json
package_json = """{
  "name": "controle-caminhoneiros",
  "version": "1.0.0",
  "private": true,
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-scripts": "5.0.1"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
  },
  "eslintConfig": {
    "extends": [
      "react-app"
    ]
  },
  "browserslist": {
    "production": [
      ">0.2%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  }
}"""

with open('controle-caminhoneiros/package.json', 'w', encoding='utf-8') as f:
    f.write(package_json)

# Criar README.md
readme_md = """# Sistema de Controle de Acesso para Caminhoneiros

Sistema completo para controle de entrada e saÃ­da de caminhoneiros com registro de dados, assinaturas digitais e gerenciamento de ajudantes.

## Funcionalidades

- âœ… Registro de entrada e saÃ­da com data/hora automÃ¡tica
- âœ… Dados do veÃ­culo (placa carreta e cavalo)
- âœ… InformaÃ§Ãµes do motorista e documentos
- âœ… Gerenciamento de ajudantes
- âœ… Assinatura digital do motorista
- âœ… Assinatura/carimbo de liberaÃ§Ã£o de saÃ­da

## Como usar

1. Preencha o formulÃ¡rio com os dados do caminhoneiro
2. Selecione se Ã© entrada ou saÃ­da
3. Adicione informaÃ§Ãµes do ajudante se necessÃ¡rio
4. Registre a assinatura digital
5. Clique em "Registrar"

## Tecnologias

- React 18
- CSS3
- JavaScript ES6+

## Deploy

Este projeto estÃ¡ configurado para deploy na Vercel.
"""

with open('controle-caminhoneiros/README.md', 'w', encoding='utf-8') as f:
    f.write(readme_md)

# Criar .gitignore
gitignore = """# dependencies
/node_modules
/.pnp
.pnp.js

# testing
/coverage

# production
/build

# misc
.DS_Store
.env.local
.env.development.local
.env.test.local
.env.production.local

npm-debug.log*
yarn-debug.log*
yarn-error.log*
"""

with open('controle-caminhoneiros/.gitignore', 'w', encoding='utf-8') as f:
    f.write(gitignore)

# Criar arquivo ZIP
zip_filename = 'controle-caminhoneiros-completo.zip'
with zipfile.ZipFile(zip_filename, 'w', zipfile.ZIP_DEFLATED) as zipf:
    for root, dirs, files in os.walk('controle-caminhoneiros'):
        for file in files:
            file_path = os.path.join(root, file)
            arcname = file_path
            zipf.write(file_path, arcname)

print(f"âœ… Projeto completo criado com sucesso!")
print(f"ğŸ“¦ Arquivo ZIP: {zip_filename}")
print(f"\nğŸ“ Estrutura de pastas:")
print("controle-caminhoneiros/")
print("â”œâ”€â”€ public/")
print("â”‚   â””â”€â”€ index.html")
print("â”œâ”€â”€ src/")
print("â”‚   â”œâ”€â”€ App.js")
print("â”‚   â”œâ”€â”€ App.css")
print("â”‚   â”œâ”€â”€ index.js")
print("â”‚   â””â”€â”€ index.css")
print("â”œâ”€â”€ .gitignore")
print("â”œâ”€â”€ package.json")
print("â””â”€â”€ README.md")
